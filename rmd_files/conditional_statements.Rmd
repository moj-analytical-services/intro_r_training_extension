# Conditional statements

## if...else statements

Conditional statements can be used when you want a piece of code to be executed only if a particular condition is met. The most basic form of these are 'if...else' statements. As a simple example, let's say we wanted to check if a variable `x` is less than 10. We can write something like:

```{r, purl=purl_example_code}
x <- 9

if (x < 10) {
  print("x is less than 10")
}
```

We can also specify if we want something different to happen if the condition is not met:
```{r, purl=purl_example_code}
x <- 11

if (x < 10) {
  print("x is less than 10")
} else {
  print("x is 10 or greater")
}
```
Or if there are multiple conditions where we want different things to happen, we can add 'else if' commands:
```{r, purl=purl_example_code}
x <- 5

if (x < 10) {
  print("x is less than 10")
} else if (x == 10) {
  print("x is equal to 10")
} else {
  print("x is greater than 10")
}
```
For the conditions themselves, we can make use of any of R's relational and logical operators. For a list of common operators, see the [appendix](#table-of-operators).


## Vectorising an if...else statement

Dplyr's `if_else()` function is useful if we want to apply an 'if...else' statement to a vector, rather than a single variable. When we use `if_else()`, we need to provide it with three arguments in the format `if_else(condition, true, false)`, where `condition` is the condition we want to test, `true` is the value to use if the condition evaluates to `TRUE`, and `false` is the value to use if the condition evaluates to `FALSE`.

For example, if we had a vector containing a set of numbers, and we wanted to create an equivalent vector containing a '1' if the number is greater than zero, or a '0' if the number is less than or equal to zero, then we could do:
```{r, purl=purl_example_code}
x <- c(0, 74, 0, 8, 23, 15, 3, 0, 0, 9)

dplyr::if_else(x > 0, 1, 0)
```

When we're manipulating dataframes, it can be useful to combine `if_else()` with the `mutate()` function from dplyr. If we take a look at the `offenders` dataframe, let's say we wanted a simple way to be able to separate youths from adult offenders. We could add a column that contains a '1' if the offender is under the age of 18, and '0' otherwise:

```{r, purl=purl_example_code}
offenders <- offenders %>%
  dplyr::mutate(youth = dplyr::if_else(AGE < 18, 1, 0))

str(offenders)
```

### Exercise

(Placeholder)


## Vectorising multiple if...else statements

In the previous section we saw how we can apply a single condition to a vector, but what if we want to apply several conditions, each with a different outcome, at the same time? We can use the `case_when()` function from dplyr to do this.

Let's say that we wanted to add a column to the `offenders` dataframe with an age band for each offender. We could do something like this:

```{r, purl=purl_example_code}
offenders <- offenders %>%
  dplyr::mutate(age_band = dplyr::case_when(
    AGE < 18 ~ "<18",
    AGE < 25 ~ "18-24",
    AGE < 35 ~ "25-34",
    AGE < 45 ~ "35-44",
    AGE < 55 ~ "45-54",
    AGE < 65 ~ "55-64",
    AGE >= 65 ~ "65+",
    TRUE ~ "Unknown"
  ))

str(offenders)
```

In the `case_when()` function, each argument should be a two-sided formula. For each formula, the condition appears to the left of a '~' symbol, and on the right is the value to assign if the condition evaluates to `TRUE`.

Note that the order of conditional statements in the `case_when()` function is important, and they will be evaluated in the order that they appear in. In the above example, the `case_when()` will first check if the person is under 18, then if they are under 25 (but 18 or over), and so on.

A default value can be assigned in the event that none of the conditions are met. This is done by putting `TRUE` in the place of a condition. In the example above, if none of the conditions are met, then a value of `"Unknown"` is assigned.


### Exercise

(Placeholder)








